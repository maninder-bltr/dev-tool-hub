"use strict";(self.webpackChunkonline_dev_tools=self.webpackChunkonline_dev_tools||[]).push([[625],{625(e,s,n){n.r(s),n.d(s,{default:()=>d});var t=n(5043),a=n(184);class l{diff(e,s){let n,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"function"===typeof t?(n=t,t={}):"callback"in t&&(n=t.callback);const a=this.castInput(e,t),l=this.castInput(s,t),i=this.removeEmpty(this.tokenize(a,t)),o=this.removeEmpty(this.tokenize(l,t));return this.diffWithOptionsObj(i,o,t,n)}diffWithOptionsObj(e,s,n,t){var a;const l=e=>(e=this.postProcess(e,n),t?void setTimeout(function(){t(e)},0):e),i=s.length,o=e.length;let c=1,d=i+o;null!=n.maxEditLength&&(d=Math.min(d,n.maxEditLength));const r=null!==(a=n.timeout)&&void 0!==a?a:1/0,h=Date.now()+r,m=[{oldPos:-1,lastComponent:void 0}];let u=this.extractCommon(m[0],s,e,0,n);if(m[0].oldPos+1>=o&&u+1>=i)return l(this.buildValues(m[0].lastComponent,s,e));let p=-1/0,x=1/0;const f=()=>{for(let t=Math.max(p,-c);t<=Math.min(x,c);t+=2){let a;const c=m[t-1],d=m[t+1];c&&(m[t-1]=void 0);let r=!1;if(d){const e=d.oldPos-t;r=d&&0<=e&&e<i}const h=c&&c.oldPos+1<o;if(r||h){if(a=!h||r&&c.oldPos<d.oldPos?this.addToPath(d,!0,!1,0,n):this.addToPath(c,!1,!0,1,n),u=this.extractCommon(a,s,e,t,n),a.oldPos+1>=o&&u+1>=i)return l(this.buildValues(a.lastComponent,s,e))||!0;m[t]=a,a.oldPos+1>=o&&(x=Math.min(x,t-1)),u+1>=i&&(p=Math.max(p,t+1))}else m[t]=void 0}c++};if(t)!function e(){setTimeout(function(){if(c>d||Date.now()>h)return t(void 0);f()||e()},0)}();else for(;c<=d&&Date.now()<=h;){const e=f();if(e)return e}}addToPath(e,s,n,t,a){const l=e.lastComponent;return l&&!a.oneChangePerToken&&l.added===s&&l.removed===n?{oldPos:e.oldPos+t,lastComponent:{count:l.count+1,added:s,removed:n,previousComponent:l.previousComponent}}:{oldPos:e.oldPos+t,lastComponent:{count:1,added:s,removed:n,previousComponent:l}}}extractCommon(e,s,n,t,a){const l=s.length,i=n.length;let o=e.oldPos,c=o-t,d=0;for(;c+1<l&&o+1<i&&this.equals(n[o+1],s[c+1],a);)c++,o++,d++,a.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!a.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=o,c}equals(e,s,n){return n.comparator?n.comparator(e,s):e===s||!!n.ignoreCase&&e.toLowerCase()===s.toLowerCase()}removeEmpty(e){const s=[];for(let n=0;n<e.length;n++)e[n]&&s.push(e[n]);return s}castInput(e,s){return e}tokenize(e,s){return Array.from(e)}join(e){return e.join("")}postProcess(e,s){return e}get useLongestToken(){return!1}buildValues(e,s,n){const t=[];let a;for(;e;)t.push(e),a=e.previousComponent,delete e.previousComponent,e=a;t.reverse();const l=t.length;let i=0,o=0,c=0;for(;i<l;i++){const e=t[i];if(e.removed)e.value=this.join(n.slice(c,c+e.count)),c+=e.count;else{if(!e.added&&this.useLongestToken){let t=s.slice(o,o+e.count);t=t.map(function(e,s){const t=n[c+s];return t.length>e.length?t:e}),e.value=this.join(t)}else e.value=this.join(s.slice(o,o+e.count));o+=e.count,e.added||(c+=e.count)}}return t}}const i=new class extends l{constructor(){super(...arguments),this.tokenize=o}equals(e,s,n){return n.ignoreWhitespace?(n.newlineIsToken&&e.includes("\n")||(e=e.trim()),n.newlineIsToken&&s.includes("\n")||(s=s.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(e.endsWith("\n")&&(e=e.slice(0,-1)),s.endsWith("\n")&&(s=s.slice(0,-1))),super.equals(e,s,n)}};function o(e,s){s.stripTrailingCr&&(e=e.replace(/\r\n/g,"\n"));const n=[],t=e.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(let a=0;a<t.length;a++){const e=t[a];a%2&&!s.newlineIsToken?n[n.length-1]+=e:n.push(e)}return n}var c=n(579);const d=()=>{const[e,s]=(0,t.useState)(""),[n,l]=(0,t.useState)(""),[o,d]=(0,t.useState)([]),[r,h]=(0,t.useState)(!1),[m,u]=(0,t.useState)(!1),[p,x]=(0,t.useState)(!1),f=(0,t.useRef)(null),j=(0,t.useRef)(null),v=(0,t.useRef)(null),g=(0,t.useCallback)(()=>{if(!e&&!n)return void d([]);let s=e,t=n;m&&(s=s.replace(/\s+$/gm,"").replace(/^\s+/gm,""),t=t.replace(/\s+$/gm,"").replace(/^\s+/gm,""));const a=(l=s,o=t,i.diff(l,o,c));var l,o,c;d(a)},[e,n,m]),N=o.filter(e=>e.added).reduce((e,s)=>e+(s.count||0),0),b=o.filter(e=>e.removed).reduce((e,s)=>e+(s.count||0),0),C=async e=>{try{await navigator.clipboard.writeText(e)}catch(s){console.error("Failed to copy:",s)}},k=(e,n)=>{const t=e.target.files[0];if(!t)return;const a=new FileReader;a.onload=e=>{"left"===n?s(e.target.result):l(e.target.result),r&&setTimeout(g,100)},a.readAsText(t)},w=(e,s)=>{const n=new Blob([e],{type:"text/plain"}),t=URL.createObjectURL(n),a=document.createElement("a");a.href=t,a.download=s,a.click(),URL.revokeObjectURL(t)},P=e?e.split("\n").length:0,y=n?n.split("\n").length:0;return(0,c.jsxs)("div",{className:"diff-checker-wrapper",children:[(0,c.jsxs)("div",{className:"input-section-main",children:[(0,c.jsxs)("div",{className:"input-header-main",children:[(0,c.jsxs)("div",{className:"input-title",children:[(0,c.jsx)(a.t69,{})," Original text"]}),(0,c.jsxs)("div",{className:"input-title",children:[(0,c.jsx)(a.t69,{})," Changed text"]})]}),(0,c.jsxs)("div",{className:"input-panels-main",children:[(0,c.jsxs)("div",{className:"input-panel-main",children:[(0,c.jsxs)("div",{className:"panel-toolbar",children:[(0,c.jsxs)("span",{className:"line-count-badge",children:[P," lines"]}),(0,c.jsxs)("div",{className:"toolbar-actions",children:[(0,c.jsx)("button",{className:"toolbar-btn",onClick:()=>C(e),title:"Copy to clipboard",disabled:!e,children:(0,c.jsx)(a.paH,{})}),(0,c.jsxs)("label",{className:"toolbar-btn upload",title:"Upload file",children:[(0,c.jsx)(a.HVe,{}),(0,c.jsx)("input",{type:"file",accept:".txt,.js,.jsx,.json,.css,.html,.md,.py,.java",onChange:e=>k(e,"left"),disabled:p})]}),e&&(0,c.jsx)("button",{className:"toolbar-btn",onClick:()=>w(e,"original.txt"),title:"Download",children:(0,c.jsx)(a.WCW,{})})]})]}),(0,c.jsx)("textarea",{ref:f,value:e,onChange:e=>{s(e.target.value),r&&g()},placeholder:"Paste your original text here...",className:"main-textarea",spellCheck:!1,disabled:p})]}),(0,c.jsxs)("div",{className:"input-panel-main",children:[(0,c.jsxs)("div",{className:"panel-toolbar",children:[(0,c.jsxs)("span",{className:"line-count-badge",children:[y," lines"]}),(0,c.jsxs)("div",{className:"toolbar-actions",children:[(0,c.jsx)("button",{className:"toolbar-btn",onClick:()=>C(n),title:"Copy to clipboard",disabled:!n,children:(0,c.jsx)(a.paH,{})}),(0,c.jsxs)("label",{className:"toolbar-btn upload",title:"Upload file",children:[(0,c.jsx)(a.HVe,{}),(0,c.jsx)("input",{type:"file",accept:".txt,.js,.jsx,.json,.css,.html,.md,.py,.java",onChange:e=>k(e,"right"),disabled:p})]}),n&&(0,c.jsx)("button",{className:"toolbar-btn",onClick:()=>w(n,"changed.txt"),title:"Download",children:(0,c.jsx)(a.WCW,{})})]})]}),(0,c.jsx)("textarea",{ref:j,value:n,onChange:e=>{l(e.target.value),r&&g()},placeholder:"Paste your changed text here...",className:"main-textarea",spellCheck:!1,disabled:p})]})]}),(0,c.jsxs)("div",{className:"action-buttons-container",children:[(0,c.jsxs)("button",{className:"btn-find-difference",onClick:()=>{x(!0),g(),h(!0),setTimeout(()=>{v.current&&v.current.scrollIntoView({behavior:"smooth",block:"start"})},100),setTimeout(()=>x(!1),300)},disabled:!e&&!n,children:[(0,c.jsx)(a.KSO,{})," Find Difference"]}),(e||n)&&(0,c.jsxs)("button",{className:"btn-clear",onClick:()=>{s(""),l(""),d([]),h(!1)},disabled:p,children:[(0,c.jsx)(a.Gml,{})," Clear"]})]}),(0,c.jsx)("div",{className:"options-container",children:(0,c.jsxs)("label",{className:"checkbox-option",children:[(0,c.jsx)("input",{type:"checkbox",checked:m,onChange:e=>u(e.target.checked),disabled:p}),(0,c.jsx)("span",{children:"Ignore whitespace differences"})]})})]}),r&&(0,c.jsxs)("div",{className:"diff-section",ref:v,children:[(0,c.jsxs)("div",{className:"diff-header-section",children:[(0,c.jsxs)("div",{className:"diff-stats",children:[(0,c.jsxs)("span",{className:"stat-badge removals",children:["\u2212 ",b," removals"]}),(0,c.jsxs)("span",{className:"stat-badge additions",children:["+ ",N," additions"]})]}),(0,c.jsxs)("div",{className:"diff-actions",children:[(0,c.jsxs)("button",{className:"btn-icon",onClick:()=>{s(n),l(e),r&&setTimeout(g,100)},title:"Swap texts",disabled:p,children:[(0,c.jsx)(a.yk7,{})," Swap"]}),(0,c.jsx)("button",{className:"btn-icon",onClick:()=>{h(!1),d([])},title:"Hide diff view",children:"Hide Diff"})]})]}),(0,c.jsxs)("div",{className:"diff-view-panels",children:[(0,c.jsxs)("div",{className:"diff-panel-view",children:[(0,c.jsxs)("div",{className:"diff-panel-header",children:[(0,c.jsx)("span",{className:"panel-label",children:"Original"}),(0,c.jsxs)("span",{className:"panel-line-count",children:[P," lines"]})]}),(0,c.jsx)("div",{className:"diff-panel-content",children:(()=>{if(!e)return(0,c.jsx)("div",{className:"empty-panel",children:"No original text"});let s=1;const n=[];return o.forEach((e,t)=>{const a=e.value.split("\n");""===a[a.length-1]&&a.pop(),a.forEach((a,l)=>{e.removed?(n.push((0,c.jsxs)("div",{className:"diff-line removed",children:[(0,c.jsx)("span",{className:"line-num",children:s}),(0,c.jsx)("span",{className:"line-content",children:a||" "})]},"left-".concat(t,"-").concat(l))),s++):e.added||(n.push((0,c.jsxs)("div",{className:"diff-line unchanged",children:[(0,c.jsx)("span",{className:"line-num",children:s}),(0,c.jsx)("span",{className:"line-content",children:a||" "})]},"left-".concat(t,"-").concat(l))),s++)})}),n.length?n:(0,c.jsx)("div",{className:"empty-panel",children:"No content"})})()})]}),(0,c.jsxs)("div",{className:"diff-panel-view",children:[(0,c.jsxs)("div",{className:"diff-panel-header",children:[(0,c.jsx)("span",{className:"panel-label",children:"Changed"}),(0,c.jsxs)("span",{className:"panel-line-count",children:[y," lines"]})]}),(0,c.jsx)("div",{className:"diff-panel-content",children:(()=>{if(!n)return(0,c.jsx)("div",{className:"empty-panel",children:"No changed text"});let e=1;const s=[];return o.forEach((n,t)=>{const a=n.value.split("\n");""===a[a.length-1]&&a.pop(),a.forEach((a,l)=>{n.added?(s.push((0,c.jsxs)("div",{className:"diff-line added",children:[(0,c.jsx)("span",{className:"line-num",children:e}),(0,c.jsx)("span",{className:"line-content",children:a||" "})]},"right-".concat(t,"-").concat(l))),e++):n.removed||(s.push((0,c.jsxs)("div",{className:"diff-line unchanged",children:[(0,c.jsx)("span",{className:"line-num",children:e}),(0,c.jsx)("span",{className:"line-content",children:a||" "})]},"right-".concat(t,"-").concat(l))),e++)})}),s.length?s:(0,c.jsx)("div",{className:"empty-panel",children:"No content"})})()})]})]}),(0,c.jsx)("div",{className:"edit-again-container",children:(0,c.jsxs)("button",{className:"btn-edit-again",onClick:()=>{h(!1),setTimeout(()=>{f.current&&f.current.focus()},100)},children:[(0,c.jsx)(a.t69,{})," Edit Text Again"]})}),(0,c.jsxs)("div",{className:"diff-legend",children:[(0,c.jsxs)("div",{className:"legend-item",children:[(0,c.jsx)("div",{className:"legend-box removed"}),(0,c.jsx)("span",{children:"Removed lines"})]}),(0,c.jsxs)("div",{className:"legend-item",children:[(0,c.jsx)("div",{className:"legend-box added"}),(0,c.jsx)("span",{children:"Added lines"})]}),(0,c.jsxs)("div",{className:"legend-item",children:[(0,c.jsx)("div",{className:"legend-box unchanged"}),(0,c.jsx)("span",{children:"Unchanged lines"})]})]})]})]})}}}]);
//# sourceMappingURL=625.085a8ef9.chunk.js.map